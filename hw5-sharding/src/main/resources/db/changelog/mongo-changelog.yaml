databaseChangeLog:
  - changeSet:
      id: enable-sharding
      author: admin
      changes:
        - customChange:
            class: liquibase.ext.mongodb.change.EnableShardingChange
            shardDatabase: chat_app

  - changeSet:
      id: shard-dialogs
      author: admin
      changes:
        - customChange:
            class: liquibase.ext.mongodb.change.ShardCollectionChange
            collectionName: dialogs
            shardKey:
              _id: hashed

  - changeSet:
      id: shard-messages
      author: admin
      changes:
        - customChange:
            class: liquibase.ext.mongodb.change.ShardCollectionChange
            collectionName: messages
            shardKey:
              dialogId: hashed